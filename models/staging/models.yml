version: 2

models:
  - name: stg_order_status
    description: "Staging for order status values from raw.sales_order_header"
    config:
      tags: ["staging"]
      schema: curated
    columns:
      - name: status
        description: "Numeric status code from the source"
        tests: [not_null]

  - name: stg_person
    description: "Staging for person data (some date fields parsed)"
    config:
      tags: ["staging"]
      schema: curated
    columns:
      - name: business_entity_id
      - name: first_name
      - name: middle_name
      - name: last_name
      - name: birth_date
      - name: date_first_purchase
      - name: total_purchase_ytd

  - name: stg_credit_card
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for credit card source data"
    columns:
      - name: credit_card_id
      - name: card_type

  - name: stg_country_region
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for country/region source data"
    columns:
      - name: country_region_code
      - name: name

  - name: stg_sales_order_detail
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for sales order detail rows"
    columns:
      - name: sales_order_id
      - name: sales_order_detail_id
      - name: product_id
      - name: unit_price
      - name: unit_price_discount
      - name: order_qty

  - name: stg_sales_order_header
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for sales order headers (dates cast to DATE)"
    columns:
      - name: sales_order_id
      - name: order_date
      - name: ship_date
      - name: due_date
      - name: status

  - name: stg_product_subcategory
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for product subcategory"
    columns:
      - name: product_subcategory_id
      - name: product_category_id
      - name: name

  - name: stg_state_province
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for state/province source data"
    columns:
      - name: state_province_id
      - name: country_region_code
      - name: name

  - name: stg_product
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for product source data"
    columns:
      - name: product_id
      - name: name
      - name: product_number
      - name: color
      - name: product_subcategory_id

  - name: stg_customer
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for customer source data"
    columns:
      - name: customer_id
      - name: person_id
      - name: store_id

  - name: stg_product_category
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for product category source data"
    columns:
      - name: product_category_id
      - name: name

  - name: stg_address
    config:
      tags: ["staging"]
      schema: curated
    description: "Staging for address source data"
    columns:
      - name: address_id
      - name: city
      - name: state_province_id
      - name: country_region_code